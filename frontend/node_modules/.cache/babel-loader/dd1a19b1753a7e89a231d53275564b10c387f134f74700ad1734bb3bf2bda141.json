{"ast":null,"code":"var _jsxFileName = \"/Users/daniil/Documents/Code/PycharmProjects/payment-gateway/frontend/src/components/PaymentPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { QRCodeSVG } from 'qrcode.react';\nimport { useNavigate } from 'react-router-dom';\nimport { generateQR, getPaymentLink } from '../api';\nimport './PaymentPage.css';\nimport sbpIcon from '../assets/SBP.png';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PaymentPage = () => {\n  _s();\n  const SESSION_DURATION = 5 * 60;\n  const PAGE_SESSION_DURATION = 5 * 60;\n  const navigate = useNavigate();\n  const [sessionId] = useState(() => {\n    return Math.floor(Math.random() * 90000000000000) + 10000000000000;\n  });\n  const [pageTimeLeft, setPageTimeLeft] = useState(PAGE_SESSION_DURATION);\n  const [qrData, setQrData] = useState(null);\n  const [paymentLink, setPaymentLink] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [qrTimeLeft, setQrTimeLeft] = useState(null);\n  const [linkTimeLeft, setLinkTimeLeft] = useState(null);\n  const [showQR, setShowQR] = useState(false);\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  useEffect(() => {\n    if (pageTimeLeft === 0) {\n      window.location.reload();\n      return;\n    }\n    const timer = setInterval(() => {\n      setPageTimeLeft(prev => prev > 0 ? prev - 1 : 0);\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [pageTimeLeft]);\n  const autoRefreshQR = useCallback(async () => {\n    console.log('üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ QR-–∫–æ–¥–∞...');\n    try {\n      const data = await generateQR();\n      if (data.success) {\n        setQrData(data.qr_code);\n        setQrTimeLeft(SESSION_DURATION);\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è QR:', err);\n    }\n  }, [SESSION_DURATION]);\n  const autoRefreshLink = useCallback(async () => {\n    console.log('üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏...');\n    try {\n      const data = await getPaymentLink();\n      if (data.success) {\n        setPaymentLink(data);\n        setLinkTimeLeft(SESSION_DURATION);\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏:', err);\n    }\n  }, [SESSION_DURATION]);\n  useEffect(() => {\n    const fetchPaymentLink = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const data = await getPaymentLink();\n        if (data.success) {\n          setPaymentLink(data);\n          setLinkTimeLeft(SESSION_DURATION);\n        } else {\n          setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Å—ã–ª–∫–∏');\n        }\n      } catch (err) {\n        setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Å—ã–ª–∫–∏');\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchPaymentLink();\n  }, [SESSION_DURATION]);\n  const handleOpenPayment = () => {\n    if (paymentLink !== null && paymentLink !== void 0 && paymentLink.link) {\n      window.open(paymentLink.link, '_blank');\n    }\n  };\n  useEffect(() => {\n    if (qrTimeLeft === null || qrTimeLeft < 0) return;\n    if (qrTimeLeft === 0) {\n      autoRefreshQR();\n      return;\n    }\n    const timer = setInterval(() => {\n      setQrTimeLeft(prev => prev > 0 ? prev - 1 : 0);\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [qrTimeLeft, autoRefreshQR]);\n  useEffect(() => {\n    if (linkTimeLeft === null || linkTimeLeft < 0) return;\n    if (linkTimeLeft === 0) {\n      autoRefreshLink();\n      return;\n    }\n    const timer = setInterval(() => {\n      setLinkTimeLeft(prev => prev > 0 ? prev - 1 : 0);\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [linkTimeLeft, autoRefreshLink]);\n  const handleGenerateQR = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await generateQR();\n      if (data.success) {\n        setQrData(data.qr_code);\n        setQrTimeLeft(SESSION_DURATION);\n        setShowQR(true);\n      } else {\n        setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–∞');\n      }\n    } catch (err) {\n      setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–∞');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const checkSystemAvailability = async () => {\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:8000'}/api/payment-status`);\n      const data = await response.json();\n      if (!data.available) {\n        // –°–∏—Å—Ç–µ–º–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—à–∏–±–∫–∏\n        navigate(`/payment-error?type=${data.reason}&message=${encodeURIComponent(data.message)}`);\n        return false;\n      }\n      return true;\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:', err);\n      return true; // –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å, –ø—É—Å—Ç—å –ø–æ–ø—Ä–æ–±—É–µ—Ç –¥–∞–ª—å—à–µ\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u0447\\u0435\\u0440\\u0435\\u0437 \\u0421\\u0411\\u041F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"subtitle\",\n          children: [\"\\u0421\\u0435\\u0441\\u0441\\u0438\\u044F: \", sessionId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"subtitle\",\n          children: [\"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u0435 \\u043F\\u043B\\u0430\\u0442\\u0435\\u0436 \\u0432 \\u0442\\u0435\\u0447\\u0435\\u043D\\u0438\\u0438: \", formatTime(pageTimeLeft)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"primary-payment\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"primary-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C \\u0432 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0438 \\u0431\\u0430\\u043D\\u043A\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"primary-subtitle\",\n            children: \"\\u0411\\u044B\\u0441\\u0442\\u0440\\u044B\\u0439 \\u0438 \\u0443\\u0434\\u043E\\u0431\\u043D\\u044B\\u0439 \\u0441\\u043F\\u043E\\u0441\\u043E\\u0431\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary btn-large btn-featured\",\n          onClick: handleOpenPayment,\n          disabled: loading || !paymentLink,\n          children: loading ? '‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: sbpIcon,\n              alt: \"\",\n              className: \"btn-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this), \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0431\\u0430\\u043D\\u043A\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"divider\",\n        children: \"\\u0438\\u043B\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"secondary-payment\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary btn-small\",\n          onClick: handleGenerateQR,\n          disabled: loading,\n          children: showQR ? '–û–±–Ω–æ–≤–∏—Ç—å QR-–∫–æ–¥' : '–ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), qrData && showQR && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"qr-display\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"qr-content\",\n            children: [/*#__PURE__*/_jsxDEV(QRCodeSVG, {\n              value: qrData.url,\n              size: 200,\n              level: \"H\",\n              includeMargin: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"qr-instruction\",\n              children: \"\\u041E\\u0442\\u0441\\u043A\\u0430\\u043D\\u0438\\u0440\\u0443\\u0439\\u0442\\u0435 \\u043A\\u0430\\u043C\\u0435\\u0440\\u043E\\u0439 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"warning-section\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"warning-box\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"warning-icon\",\n                  children: \"\\u26A0\\uFE0F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"warning-content\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"\\u0412\\u0410\\u0416\\u041D\\u041E!\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"QR - \\u043A\\u043E\\u0434 \\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u044F\\u0435\\u0442\\u0441\\u044F \\u043A\\u0430\\u0436\\u0434\\u044B\\u0435 5 \\u043C\\u0438\\u043D\\u0443\\u0442, \\u043E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u043F\\u043E \\u0438\\u0441\\u0442\\u0451\\u043A\\u0448\\u0438\\u043C \\u0440\\u0435\\u043A\\u0432\\u0438\\u0437\\u0438\\u0442\\u0430\\u043C \\u043C\\u043E\\u0436\\u0435\\u0442 \\u043F\\u0440\\u0438\\u0432\\u0435\\u0441\\u0442\\u0438 \\u043A \\u043F\\u043E\\u0442\\u0435\\u0440\\u0435 \\u0441\\u0440\\u0435\\u0434\\u0441\\u0442\\u0432.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 219,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 218,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-section\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"error-icon\",\n            children: \"\\u26A0\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"faq-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0427\\u0430\\u0441\\u0442\\u044B\\u0435 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n          className: \"faq-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n            children: \"\\u041A\\u0430\\u043A \\u043E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C \\u0447\\u0435\\u0440\\u0435\\u0437 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435 \\u0431\\u0430\\u043D\\u043A\\u0430?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u041D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0431\\u0430\\u043D\\u043A\\\", \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0430 \\u043E\\u0442\\u043A\\u0440\\u043E\\u0435\\u0442 \\u0441\\u043F\\u0438\\u0441\\u043E\\u043A \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u0431\\u0430\\u043D\\u043A\\u043E\\u0432 \\u0434\\u043B\\u044F \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B \\u0447\\u0435\\u0440\\u0435\\u0437 \\u0421\\u0411\\u041F.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n          className: \"faq-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n            children: \"\\u0417\\u0430\\u0447\\u0435\\u043C \\u043D\\u0443\\u0436\\u0435\\u043D QR-\\u043A\\u043E\\u0434?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"QR-\\u043A\\u043E\\u0434 \\u2014 \\u0430\\u043B\\u044C\\u0442\\u0435\\u0440\\u043D\\u0430\\u0442\\u0438\\u0432\\u043D\\u044B\\u0439 \\u0441\\u043F\\u043E\\u0441\\u043E\\u0431 \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B. \\u041E\\u0442\\u0441\\u043A\\u0430\\u043D\\u0438\\u0440\\u0443\\u0439\\u0442\\u0435 \\u0435\\u0433\\u043E \\u043A\\u0430\\u043C\\u0435\\u0440\\u043E\\u0439 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430, \\u0435\\u0441\\u043B\\u0438 \\u043D\\u0435 \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C \\u043A\\u043D\\u043E\\u043F\\u043A\\u0443 \\u0432\\u044B\\u0431\\u043E\\u0440\\u0430 \\u0431\\u0430\\u043D\\u043A\\u0430.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n          className: \"faq-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n            children: \"\\u0412 \\u043A\\u0430\\u043A\\u0438\\u0435 \\u0447\\u0430\\u0441\\u044B \\u043F\\u0440\\u0438\\u043D\\u0438\\u043C\\u0430\\u044E\\u0442\\u0441\\u044F \\u043F\\u043B\\u0430\\u0442\\u0435\\u0436\\u0438?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u041F\\u043B\\u0430\\u0442\\u0435\\u0436\\u0438 \\u043F\\u0440\\u0438\\u043D\\u0438\\u043C\\u0430\\u044E\\u0442\\u0441\\u044F \\u0435\\u0436\\u0435\\u0434\\u043D\\u0435\\u0432\\u043D\\u043E \\u0441 10:00 \\u0434\\u043E 21:00 \\u043F\\u043E \\u043C\\u043E\\u0441\\u043A\\u043E\\u0432\\u0441\\u043A\\u043E\\u043C\\u0443 \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u0438.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 5\n  }, this);\n};\n_s(PaymentPage, \"KWvpVsJ/E5BRHP9H1QoRh7XxOuk=\", false, function () {\n  return [useNavigate];\n});\n_c = PaymentPage;\nexport default PaymentPage;\nvar _c;\n$RefreshReg$(_c, \"PaymentPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","QRCodeSVG","useNavigate","generateQR","getPaymentLink","sbpIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","PaymentPage","_s","SESSION_DURATION","PAGE_SESSION_DURATION","navigate","sessionId","Math","floor","random","pageTimeLeft","setPageTimeLeft","qrData","setQrData","paymentLink","setPaymentLink","loading","setLoading","error","setError","qrTimeLeft","setQrTimeLeft","linkTimeLeft","setLinkTimeLeft","showQR","setShowQR","formatTime","seconds","mins","secs","toString","padStart","window","location","reload","timer","setInterval","prev","clearInterval","autoRefreshQR","console","log","data","success","qr_code","err","autoRefreshLink","fetchPaymentLink","handleOpenPayment","link","open","handleGenerateQR","checkSystemAvailability","response","fetch","process","env","REACT_APP_API_URL","json","available","reason","encodeURIComponent","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","src","alt","value","url","size","level","includeMargin","_c","$RefreshReg$"],"sources":["/Users/daniil/Documents/Code/PycharmProjects/payment-gateway/frontend/src/components/PaymentPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { QRCodeSVG } from 'qrcode.react';\nimport { useNavigate } from 'react-router-dom';\nimport { generateQR, getPaymentLink } from '../api';\nimport './PaymentPage.css';\nimport sbpIcon from '../assets/SBP.png';\n\nconst PaymentPage = () => {\n  const SESSION_DURATION = 5 * 60;\n  const PAGE_SESSION_DURATION = 5 * 60;\n  const navigate = useNavigate();\n  const [sessionId] = useState(() => {\n    return Math.floor(Math.random() * 90000000000000) + 10000000000000;\n  });\n\n  const [pageTimeLeft, setPageTimeLeft] = useState(PAGE_SESSION_DURATION);\n  const [qrData, setQrData] = useState(null);\n  const [paymentLink, setPaymentLink] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [qrTimeLeft, setQrTimeLeft] = useState(null);\n  const [linkTimeLeft, setLinkTimeLeft] = useState(null);\n  const [showQR, setShowQR] = useState(false);\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  useEffect(() => {\n    if (pageTimeLeft === 0) {\n      window.location.reload();\n      return;\n    }\n    const timer = setInterval(() => {\n      setPageTimeLeft((prev) => (prev > 0 ? prev - 1 : 0));\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [pageTimeLeft]);\n\n  const autoRefreshQR = useCallback(async () => {\n    console.log('üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ QR-–∫–æ–¥–∞...');\n    try {\n      const data = await generateQR();\n      if (data.success) {\n        setQrData(data.qr_code);\n        setQrTimeLeft(SESSION_DURATION);\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è QR:', err);\n    }\n  }, [SESSION_DURATION]);\n\n  const autoRefreshLink = useCallback(async () => {\n    console.log('üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏...');\n    try {\n      const data = await getPaymentLink();\n      if (data.success) {\n        setPaymentLink(data);\n        setLinkTimeLeft(SESSION_DURATION);\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏:', err);\n    }\n  }, [SESSION_DURATION]);\n\n  useEffect(() => {\n    const fetchPaymentLink = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const data = await getPaymentLink();\n        if (data.success) {\n          setPaymentLink(data);\n          setLinkTimeLeft(SESSION_DURATION);\n        } else {\n          setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Å—ã–ª–∫–∏');\n        }\n      } catch (err) {\n        setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Å—ã–ª–∫–∏');\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchPaymentLink();\n  }, [SESSION_DURATION]);\n\n  const handleOpenPayment = () => {\n    if (paymentLink?.link) {\n      window.open(paymentLink.link, '_blank');\n    }\n  };\n\n  useEffect(() => {\n    if (qrTimeLeft === null || qrTimeLeft < 0) return;\n    if (qrTimeLeft === 0) {\n      autoRefreshQR();\n      return;\n    }\n    const timer = setInterval(() => {\n      setQrTimeLeft((prev) => (prev > 0 ? prev - 1 : 0));\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [qrTimeLeft, autoRefreshQR]);\n\n  useEffect(() => {\n    if (linkTimeLeft === null || linkTimeLeft < 0) return;\n    if (linkTimeLeft === 0) {\n      autoRefreshLink();\n      return;\n    }\n    const timer = setInterval(() => {\n      setLinkTimeLeft((prev) => (prev > 0 ? prev - 1 : 0));\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [linkTimeLeft, autoRefreshLink]);\n\n  const handleGenerateQR = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await generateQR();\n      if (data.success) {\n        setQrData(data.qr_code);\n        setQrTimeLeft(SESSION_DURATION);\n        setShowQR(true);\n      } else {\n        setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–∞');\n      }\n    } catch (err) {\n      setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–∞');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const checkSystemAvailability = async () => {\n    try {\n      const response = await fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:8000'}/api/payment-status`);\n      const data = await response.json();\n\n      if (!data.available) {\n        // –°–∏—Å—Ç–µ–º–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—à–∏–±–∫–∏\n        navigate(`/payment-error?type=${data.reason}&message=${encodeURIComponent(data.message)}`);\n        return false;\n      }\n\n      return true;\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:', err);\n      return true; // –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å, –ø—É—Å—Ç—å –ø–æ–ø—Ä–æ–±—É–µ—Ç –¥–∞–ª—å—à–µ\n    }\n  };\n\n  return (\n    <div className=\"payment-page\">\n      <div className=\"payment-container\">\n        <div className=\"header\">\n          <h1>–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –°–ë–ü</h1>\n          <p className=\"subtitle\">–°–µ—Å—Å–∏—è: {sessionId}</p>\n          <p className=\"subtitle\">–ó–∞–≤–µ—Ä—à–∏—Ç–µ –ø–ª–∞—Ç–µ–∂ –≤ —Ç–µ—á–µ–Ω–∏–∏: {formatTime(pageTimeLeft)}</p>\n        </div>\n\n        {/* –û–°–ù–û–í–ù–û–ô –°–ü–û–°–û–ë –û–ü–õ–ê–¢–´ - –ü–û –¶–ï–ù–¢–†–£ */}\n        <div className=\"primary-payment\">\n          <div className=\"primary-header\">\n            <h2>–û–ø–ª–∞—Ç–∏—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –±–∞–Ω–∫–∞</h2>\n            <p className=\"primary-subtitle\">–ë—ã—Å—Ç—Ä—ã–π –∏ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–±</p>\n          </div>\n\n          <button\n            className=\"btn btn-primary btn-large btn-featured\"\n            onClick={handleOpenPayment}\n            disabled={loading || !paymentLink}\n          >\n            {loading ? '‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...' : (\n              <>\n                <img src={sbpIcon} alt=\"\" className=\"btn-icon\" />\n                –í—ã–±—Ä–∞—Ç—å –±–∞–Ω–∫\n              </>\n            )}\n          </button>\n        </div>\n\n        {/* –†–ê–ó–î–ï–õ–ò–¢–ï–õ–¨ */}\n        <div className=\"divider\">–∏–ª–∏</div>\n\n        {/* –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ô –°–ü–û–°–û–ë - QR –ö–û–î */}\n        <div className=\"secondary-payment\">\n          <button\n            className=\"btn btn-secondary btn-small\"\n            onClick={handleGenerateQR}\n            disabled={loading}\n          >\n            {showQR ? '–û–±–Ω–æ–≤–∏—Ç—å QR-–∫–æ–¥' : '–ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è'}\n          </button>\n\n          {qrData && showQR && (\n            <div className=\"qr-display\">\n              <div className=\"qr-content\">\n                <QRCodeSVG\n                  value={qrData.url}\n                  size={200}\n                  level=\"H\"\n                  includeMargin={true}\n                />\n                <p className=\"qr-instruction\">\n                  –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ –∫–∞–º–µ—Ä–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω–∞\n                </p>\n                {/* –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï */}\n                <div className=\"warning-section\">\n                    <div className=\"warning-box\">\n                        <div className=\"warning-icon\">‚ö†Ô∏è</div>\n                        <div className=\"warning-content\">\n                            <h3>–í–ê–ñ–ù–û!</h3>\n                            <p>\n                                <strong>QR - –∫–æ–¥ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç, –æ–ø–ª–∞—Ç–∞ –ø–æ –∏—Å—Ç—ë–∫—à–∏–º —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ —Å—Ä–µ–¥—Å—Ç–≤.</strong>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n\n        {/* –û–®–ò–ë–ö–ê */}\n        {error && (\n          <div className=\"error-section\">\n            <div className=\"error-box\">\n              <span className=\"error-icon\">‚ö†Ô∏è</span>\n              <p>{error}</p>\n            </div>\n          </div>\n        )}\n\n        {/* FAQ */}\n        <div className=\"faq-section\">\n          <h3>–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h3>\n          <details className=\"faq-item\">\n            <summary>–ö–∞–∫ –æ–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–∞–Ω–∫–∞?</summary>\n            <p>–ù–∞–∂–º–∏—Ç–µ \"–í—ã–±—Ä–∞—Ç—å –±–∞–Ω–∫\", —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–∫—Ä–æ–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–∞–Ω–∫–æ–≤ –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –°–ë–ü.</p>\n          </details>\n          <details className=\"faq-item\">\n            <summary>–ó–∞—á–µ–º –Ω—É–∂–µ–Ω QR-–∫–æ–¥?</summary>\n            <p>QR-–∫–æ–¥ ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ –µ–≥–æ –∫–∞–º–µ—Ä–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –µ—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –≤—ã–±–æ—Ä–∞ –±–∞–Ω–∫–∞.</p>\n          </details>\n          <details className=\"faq-item\">\n            <summary>–í –∫–∞–∫–∏–µ —á–∞—Å—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –ø–ª–∞—Ç–µ–∂–∏?</summary>\n            <p>–ü–ª–∞—Ç–µ–∂–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 10:00 –¥–æ 21:00 –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏.</p>\n          </details>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}