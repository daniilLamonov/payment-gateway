{"ast":null,"code":"var _jsxFileName = \"/Users/daniil/Documents/Code/PycharmProjects/payment-gateway/frontend/src/components/PaymentPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom'; // ‚Üê –î–û–ë–ê–í–¨–¢–ï\nimport { QRCodeSVG } from 'qrcode.react';\nimport { generateQR, getPaymentLink, checkPaymentStatus } from '../api'; // ‚Üê –î–û–ë–ê–í–¨–¢–ï checkPaymentStatus\nimport './PaymentPage.css';\nimport sbpIcon from '../assets/SBP.png';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PaymentPage = () => {\n  _s();\n  const navigate = useNavigate(); // ‚Üê –î–û–ë–ê–í–¨–¢–ï\n  const SESSION_DURATION = 5 * 60;\n  const PAGE_SESSION_DURATION = 5 * 60;\n  const [sessionId] = useState(() => {\n    return Math.floor(Math.random() * 90000000000000) + 10000000000000;\n  });\n  const [pageTimeLeft, setPageTimeLeft] = useState(PAGE_SESSION_DURATION);\n  const [qrData, setQrData] = useState(null);\n  const [paymentLink, setPaymentLink] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [qrTimeLeft, setQrTimeLeft] = useState(null);\n  const [linkTimeLeft, setLinkTimeLeft] = useState(null);\n  const [showQR, setShowQR] = useState(false);\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  useEffect(() => {\n    if (pageTimeLeft === 0) {\n      window.location.reload();\n      return;\n    }\n    const timer = setInterval(() => {\n      setPageTimeLeft(prev => prev > 0 ? prev - 1 : 0);\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [pageTimeLeft]);\n\n  // ============================================\n  // üÜï –§–£–ù–ö–¶–ò–Ø –ü–†–û–í–ï–†–ö–ò –î–û–°–¢–£–ü–ù–û–°–¢–ò –°–ò–°–¢–ï–ú–´\n  // ============================================\n  const checkSystemAvailability = async () => {\n    try {\n      const data = await checkPaymentStatus();\n      if (!data.available) {\n        // –°–∏—Å—Ç–µ–º–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—à–∏–±–∫–∏\n        navigate(`/payment-error?type=${data.reason}&message=${encodeURIComponent(data.message)}`);\n        return false;\n      }\n      return true;\n    } catch (err) {\n      console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:', err);\n      // –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å, –ø—É—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø—Ä–æ–±—É–µ—Ç –¥–∞–ª—å—à–µ\n      return true;\n    }\n  };\n\n  // ============================================\n  // üîÑ –ê–í–¢–û–û–ë–ù–û–í–õ–ï–ù–ò–ï QR (–° –ü–†–û–í–ï–†–ö–û–ô)\n  // ============================================\n  const autoRefreshQR = useCallback(async () => {\n    console.log('üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ QR-–∫–æ–¥–∞...');\n    try {\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º\n      const isAvailable = await checkSystemAvailability();\n      if (!isAvailable) {\n        return; // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—à–∏–±–∫—É —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω\n      }\n      const data = await generateQR();\n      if (data.success) {\n        setQrData(data.qr_code);\n        setQrTimeLeft(SESSION_DURATION);\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è QR:', err);\n    }\n  }, [SESSION_DURATION, navigate]);\n\n  // ============================================\n  // üîÑ –ê–í–¢–û–û–ë–ù–û–í–õ–ï–ù–ò–ï –°–°–´–õ–ö–ò (–° –ü–†–û–í–ï–†–ö–û–ô)\n  // ============================================\n  const autoRefreshLink = useCallback(async () => {\n    console.log('üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏...');\n    try {\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º\n      const isAvailable = await checkSystemAvailability();\n      if (!isAvailable) {\n        return; // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—à–∏–±–∫—É —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω\n      }\n      const data = await getPaymentLink();\n      if (data.success) {\n        setPaymentLink(data);\n        setLinkTimeLeft(SESSION_DURATION);\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏:', err);\n    }\n  }, [SESSION_DURATION, navigate]);\n\n  // ============================================\n  // üì• –ü–ï–†–í–û–ù–ê–ß–ê–õ–¨–ù–ê–Ø –ó–ê–ì–†–£–ó–ö–ê –°–°–´–õ–ö–ò\n  // ============================================\n  useEffect(() => {\n    const fetchPaymentLink = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å\n        const isAvailable = await checkSystemAvailability();\n        if (!isAvailable) {\n          setLoading(false);\n          return; // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—à–∏–±–∫—É —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω\n        }\n        const data = await getPaymentLink();\n        if (data.success) {\n          setPaymentLink(data);\n          setLinkTimeLeft(SESSION_DURATION);\n        } else {\n          setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Å—ã–ª–∫–∏');\n        }\n      } catch (err) {\n        setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Å—ã–ª–∫–∏');\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchPaymentLink();\n  }, [SESSION_DURATION, navigate]);\n\n  // ============================================\n  // üîò –û–¢–ö–†–´–¢–ò–ï –ü–õ–ê–¢–ï–ñ–ê (–° –ü–†–û–í–ï–†–ö–û–ô)\n  // ============================================\n  const handleOpenPayment = async () => {\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º\n    const isAvailable = await checkSystemAvailability();\n    if (!isAvailable) {\n      return; // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—à–∏–±–∫—É —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω\n    }\n    if (paymentLink !== null && paymentLink !== void 0 && paymentLink.link) {\n      window.open(paymentLink.link, '_blank');\n    }\n  };\n  const handleGenerateQR = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π\n      const isAvailable = await checkSystemAvailability();\n      if (!isAvailable) {\n        setLoading(false);\n        return; // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—à–∏–±–∫—É —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω\n      }\n      const data = await generateQR();\n      if (data.success) {\n        setQrData(data.qr_code);\n        setQrTimeLeft(SESSION_DURATION);\n        setShowQR(true);\n      } else {\n        setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–∞');\n      }\n    } catch (err) {\n      setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–∞');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (qrTimeLeft === null || qrTimeLeft < 0) return;\n    if (qrTimeLeft === 0) {\n      autoRefreshQR();\n      return;\n    }\n    const timer = setInterval(() => {\n      setQrTimeLeft(prev => prev > 0 ? prev - 1 : 0);\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [qrTimeLeft, autoRefreshQR]);\n  useEffect(() => {\n    if (linkTimeLeft === null || linkTimeLeft < 0) return;\n    if (linkTimeLeft === 0) {\n      autoRefreshLink();\n      return;\n    }\n    const timer = setInterval(() => {\n      setLinkTimeLeft(prev => prev > 0 ? prev - 1 : 0);\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [linkTimeLeft, autoRefreshLink]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u0447\\u0435\\u0440\\u0435\\u0437 \\u0421\\u0411\\u041F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"subtitle\",\n          children: [\"\\u0421\\u0435\\u0441\\u0441\\u0438\\u044F: \", sessionId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"subtitle\",\n          children: [\"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u0435 \\u043F\\u043B\\u0430\\u0442\\u0435\\u0436 \\u0432 \\u0442\\u0435\\u0447\\u0435\\u043D\\u0438\\u0438: \", formatTime(pageTimeLeft)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"primary-payment\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"primary-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C \\u0432 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0438 \\u0431\\u0430\\u043D\\u043A\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"primary-subtitle\",\n            children: \"\\u0411\\u044B\\u0441\\u0442\\u0440\\u044B\\u0439 \\u0438 \\u0443\\u0434\\u043E\\u0431\\u043D\\u044B\\u0439 \\u0441\\u043F\\u043E\\u0441\\u043E\\u0431\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary btn-large btn-featured\",\n          onClick: handleOpenPayment,\n          disabled: loading || !paymentLink,\n          children: loading ? '‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: sbpIcon,\n              alt: \"\",\n              className: \"btn-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this), \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0431\\u0430\\u043D\\u043A\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"divider\",\n        children: \"\\u0438\\u043B\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"secondary-payment\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary btn-small\",\n          onClick: handleGenerateQR,\n          disabled: loading,\n          children: showQR ? '–û–±–Ω–æ–≤–∏—Ç—å QR-–∫–æ–¥' : '–ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), qrData && showQR && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"qr-display\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"qr-content\",\n            children: [/*#__PURE__*/_jsxDEV(QRCodeSVG, {\n              value: qrData.url,\n              size: 200,\n              level: \"H\",\n              includeMargin: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"qr-instruction\",\n              children: \"\\u041E\\u0442\\u0441\\u043A\\u0430\\u043D\\u0438\\u0440\\u0443\\u0439\\u0442\\u0435 \\u043A\\u0430\\u043C\\u0435\\u0440\\u043E\\u0439 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"warning-section\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"warning-box\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"warning-icon\",\n                  children: \"\\u26A0\\uFE0F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"warning-content\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"\\u0412\\u0410\\u0416\\u041D\\u041E!\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"QR-\\u043A\\u043E\\u0434 \\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u044F\\u0435\\u0442\\u0441\\u044F \\u043A\\u0430\\u0436\\u0434\\u044B\\u0435 5 \\u043C\\u0438\\u043D\\u0443\\u0442, \\u043E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u043F\\u043E \\u0438\\u0441\\u0442\\u0451\\u043A\\u0448\\u0438\\u043C \\u0440\\u0435\\u043A\\u0432\\u0438\\u0437\\u0438\\u0442\\u0430\\u043C \\u043C\\u043E\\u0436\\u0435\\u0442 \\u043F\\u0440\\u0438\\u0432\\u0435\\u0441\\u0442\\u0438 \\u043A \\u043F\\u043E\\u0442\\u0435\\u0440\\u0435 \\u0441\\u0440\\u0435\\u0434\\u0441\\u0442\\u0432.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 268,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 267,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-section\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"error-icon\",\n            children: \"\\u26A0\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"faq-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0427\\u0430\\u0441\\u0442\\u044B\\u0435 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n          className: \"faq-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n            children: \"\\u041A\\u0430\\u043A \\u043E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C \\u0447\\u0435\\u0440\\u0435\\u0437 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435 \\u0431\\u0430\\u043D\\u043A\\u0430?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u041D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0431\\u0430\\u043D\\u043A\\\", \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0430 \\u043E\\u0442\\u043A\\u0440\\u043E\\u0435\\u0442 \\u0441\\u043F\\u0438\\u0441\\u043E\\u043A \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u0431\\u0430\\u043D\\u043A\\u043E\\u0432 \\u0434\\u043B\\u044F \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B \\u0447\\u0435\\u0440\\u0435\\u0437 \\u0421\\u0411\\u041F.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n          className: \"faq-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n            children: \"\\u0417\\u0430\\u0447\\u0435\\u043C \\u043D\\u0443\\u0436\\u0435\\u043D QR-\\u043A\\u043E\\u0434?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"QR-\\u043A\\u043E\\u0434 \\u2014 \\u0430\\u043B\\u044C\\u0442\\u0435\\u0440\\u043D\\u0430\\u0442\\u0438\\u0432\\u043D\\u044B\\u0439 \\u0441\\u043F\\u043E\\u0441\\u043E\\u0431 \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B. \\u041E\\u0442\\u0441\\u043A\\u0430\\u043D\\u0438\\u0440\\u0443\\u0439\\u0442\\u0435 \\u0435\\u0433\\u043E \\u043A\\u0430\\u043C\\u0435\\u0440\\u043E\\u0439 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430, \\u0435\\u0441\\u043B\\u0438 \\u043D\\u0435 \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C \\u043A\\u043D\\u043E\\u043F\\u043A\\u0443 \\u0432\\u044B\\u0431\\u043E\\u0440\\u0430 \\u0431\\u0430\\u043D\\u043A\\u0430.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n          className: \"faq-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n            children: \"\\u0412 \\u043A\\u0430\\u043A\\u0438\\u0435 \\u0447\\u0430\\u0441\\u044B \\u043F\\u0440\\u0438\\u043D\\u0438\\u043C\\u0430\\u044E\\u0442\\u0441\\u044F \\u043F\\u043B\\u0430\\u0442\\u0435\\u0436\\u0438?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u041F\\u043B\\u0430\\u0442\\u0435\\u0436\\u0438 \\u043F\\u0440\\u0438\\u043D\\u0438\\u043C\\u0430\\u044E\\u0442\\u0441\\u044F \\u0435\\u0436\\u0435\\u0434\\u043D\\u0435\\u0432\\u043D\\u043E \\u0441 10:00 \\u0434\\u043E 21:00 \\u043F\\u043E \\u043C\\u043E\\u0441\\u043A\\u043E\\u0432\\u0441\\u043A\\u043E\\u043C\\u0443 \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u0438.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 5\n  }, this);\n};\n_s(PaymentPage, \"KWvpVsJ/E5BRHP9H1QoRh7XxOuk=\", false, function () {\n  return [useNavigate];\n});\n_c = PaymentPage;\nexport default PaymentPage;\nvar _c;\n$RefreshReg$(_c, \"PaymentPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","QRCodeSVG","generateQR","getPaymentLink","checkPaymentStatus","sbpIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","PaymentPage","_s","navigate","SESSION_DURATION","PAGE_SESSION_DURATION","sessionId","Math","floor","random","pageTimeLeft","setPageTimeLeft","qrData","setQrData","paymentLink","setPaymentLink","loading","setLoading","error","setError","qrTimeLeft","setQrTimeLeft","linkTimeLeft","setLinkTimeLeft","showQR","setShowQR","formatTime","seconds","mins","secs","toString","padStart","window","location","reload","timer","setInterval","prev","clearInterval","checkSystemAvailability","data","available","reason","encodeURIComponent","message","err","console","autoRefreshQR","log","isAvailable","success","qr_code","autoRefreshLink","fetchPaymentLink","handleOpenPayment","link","open","handleGenerateQR","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","src","alt","value","url","size","level","includeMargin","_c","$RefreshReg$"],"sources":["/Users/daniil/Documents/Code/PycharmProjects/payment-gateway/frontend/src/components/PaymentPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';  // ‚Üê –î–û–ë–ê–í–¨–¢–ï\nimport { QRCodeSVG } from 'qrcode.react';\nimport { generateQR, getPaymentLink, checkPaymentStatus } from '../api';  // ‚Üê –î–û–ë–ê–í–¨–¢–ï checkPaymentStatus\nimport './PaymentPage.css';\nimport sbpIcon from '../assets/SBP.png';\n\nconst PaymentPage = () => {\n  const navigate = useNavigate();  // ‚Üê –î–û–ë–ê–í–¨–¢–ï\n  const SESSION_DURATION = 5 * 60;\n  const PAGE_SESSION_DURATION = 5 * 60;\n\n  const [sessionId] = useState(() => {\n    return Math.floor(Math.random() * 90000000000000) + 10000000000000;\n  });\n\n  const [pageTimeLeft, setPageTimeLeft] = useState(PAGE_SESSION_DURATION);\n  const [qrData, setQrData] = useState(null);\n  const [paymentLink, setPaymentLink] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [qrTimeLeft, setQrTimeLeft] = useState(null);\n  const [linkTimeLeft, setLinkTimeLeft] = useState(null);\n  const [showQR, setShowQR] = useState(false);\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  useEffect(() => {\n    if (pageTimeLeft === 0) {\n      window.location.reload();\n      return;\n    }\n    const timer = setInterval(() => {\n      setPageTimeLeft((prev) => (prev > 0 ? prev - 1 : 0));\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [pageTimeLeft]);\n\n  // ============================================\n  // üÜï –§–£–ù–ö–¶–ò–Ø –ü–†–û–í–ï–†–ö–ò –î–û–°–¢–£–ü–ù–û–°–¢–ò –°–ò–°–¢–ï–ú–´\n  // ============================================\n  const checkSystemAvailability = async () => {\n    try {\n      const data = await checkPaymentStatus();\n\n      if (!data.available) {\n        // –°–∏—Å—Ç–µ–º–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—à–∏–±–∫–∏\n        navigate(`/payment-error?type=${data.reason}&message=${encodeURIComponent(data.message)}`);\n        return false;\n      }\n\n      return true;\n    } catch (err) {\n      console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:', err);\n      // –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å, –ø—É—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø—Ä–æ–±—É–µ—Ç –¥–∞–ª—å—à–µ\n      return true;\n    }\n  };\n\n  // ============================================\n  // üîÑ –ê–í–¢–û–û–ë–ù–û–í–õ–ï–ù–ò–ï QR (–° –ü–†–û–í–ï–†–ö–û–ô)\n  // ============================================\n  const autoRefreshQR = useCallback(async () => {\n    console.log('üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ QR-–∫–æ–¥–∞...');\n    try {\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º\n      const isAvailable = await checkSystemAvailability();\n      if (!isAvailable) {\n        return; // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—à–∏–±–∫—É —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω\n      }\n\n      const data = await generateQR();\n      if (data.success) {\n        setQrData(data.qr_code);\n        setQrTimeLeft(SESSION_DURATION);\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è QR:', err);\n    }\n  }, [SESSION_DURATION, navigate]);\n\n  // ============================================\n  // üîÑ –ê–í–¢–û–û–ë–ù–û–í–õ–ï–ù–ò–ï –°–°–´–õ–ö–ò (–° –ü–†–û–í–ï–†–ö–û–ô)\n  // ============================================\n  const autoRefreshLink = useCallback(async () => {\n    console.log('üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏...');\n    try {\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º\n      const isAvailable = await checkSystemAvailability();\n      if (!isAvailable) {\n        return; // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—à–∏–±–∫—É —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω\n      }\n\n      const data = await getPaymentLink();\n      if (data.success) {\n        setPaymentLink(data);\n        setLinkTimeLeft(SESSION_DURATION);\n      }\n    } catch (err) {\n      console.error('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏:', err);\n    }\n  }, [SESSION_DURATION, navigate]);\n\n  // ============================================\n  // üì• –ü–ï–†–í–û–ù–ê–ß–ê–õ–¨–ù–ê–Ø –ó–ê–ì–†–£–ó–ö–ê –°–°–´–õ–ö–ò\n  // ============================================\n  useEffect(() => {\n    const fetchPaymentLink = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å\n        const isAvailable = await checkSystemAvailability();\n        if (!isAvailable) {\n          setLoading(false);\n          return; // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—à–∏–±–∫—É —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω\n        }\n\n        const data = await getPaymentLink();\n        if (data.success) {\n          setPaymentLink(data);\n          setLinkTimeLeft(SESSION_DURATION);\n        } else {\n          setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Å—ã–ª–∫–∏');\n        }\n      } catch (err) {\n        setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Å—ã–ª–∫–∏');\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchPaymentLink();\n  }, [SESSION_DURATION, navigate]);\n\n  // ============================================\n  // üîò –û–¢–ö–†–´–¢–ò–ï –ü–õ–ê–¢–ï–ñ–ê (–° –ü–†–û–í–ï–†–ö–û–ô)\n  // ============================================\n  const handleOpenPayment = async () => {\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º\n    const isAvailable = await checkSystemAvailability();\n    if (!isAvailable) {\n      return; // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—à–∏–±–∫—É —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω\n    }\n\n    if (paymentLink?.link) {\n      window.open(paymentLink.link, '_blank');\n    }\n  };\n\n  const handleGenerateQR = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π\n      const isAvailable = await checkSystemAvailability();\n      if (!isAvailable) {\n        setLoading(false);\n        return; // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—à–∏–±–∫—É —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω\n      }\n\n      const data = await generateQR();\n      if (data.success) {\n        setQrData(data.qr_code);\n        setQrTimeLeft(SESSION_DURATION);\n        setShowQR(true);\n      } else {\n        setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–∞');\n      }\n    } catch (err) {\n      setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–∞');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (qrTimeLeft === null || qrTimeLeft < 0) return;\n    if (qrTimeLeft === 0) {\n      autoRefreshQR();\n      return;\n    }\n    const timer = setInterval(() => {\n      setQrTimeLeft((prev) => (prev > 0 ? prev - 1 : 0));\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [qrTimeLeft, autoRefreshQR]);\n\n  useEffect(() => {\n    if (linkTimeLeft === null || linkTimeLeft < 0) return;\n    if (linkTimeLeft === 0) {\n      autoRefreshLink();\n      return;\n    }\n    const timer = setInterval(() => {\n      setLinkTimeLeft((prev) => (prev > 0 ? prev - 1 : 0));\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [linkTimeLeft, autoRefreshLink]);\n\n  return (\n    <div className=\"payment-page\">\n      <div className=\"payment-container\">\n        <div className=\"header\">\n          <h1>–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –°–ë–ü</h1>\n          <p className=\"subtitle\">–°–µ—Å—Å–∏—è: {sessionId}</p>\n          <p className=\"subtitle\">–ó–∞–≤–µ—Ä—à–∏—Ç–µ –ø–ª–∞—Ç–µ–∂ –≤ —Ç–µ—á–µ–Ω–∏–∏: {formatTime(pageTimeLeft)}</p>\n        </div>\n\n        {/* –û–°–ù–û–í–ù–û–ô –°–ü–û–°–û–ë –û–ü–õ–ê–¢–´ - –ü–û –¶–ï–ù–¢–†–£ */}\n        <div className=\"primary-payment\">\n          <div className=\"primary-header\">\n            <h2>–û–ø–ª–∞—Ç–∏—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –±–∞–Ω–∫–∞</h2>\n            <p className=\"primary-subtitle\">–ë—ã—Å—Ç—Ä—ã–π –∏ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–±</p>\n          </div>\n\n          <button\n            className=\"btn btn-primary btn-large btn-featured\"\n            onClick={handleOpenPayment}\n            disabled={loading || !paymentLink}\n          >\n            {loading ? '‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...' : (\n              <>\n                <img src={sbpIcon} alt=\"\" className=\"btn-icon\" />\n                –í—ã–±—Ä–∞—Ç—å –±–∞–Ω–∫\n              </>\n            )}\n          </button>\n        </div>\n\n        {/* –†–ê–ó–î–ï–õ–ò–¢–ï–õ–¨ */}\n        <div className=\"divider\">–∏–ª–∏</div>\n\n        {/* –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ô –°–ü–û–°–û–ë - QR –ö–û–î */}\n        <div className=\"secondary-payment\">\n          <button\n            className=\"btn btn-secondary btn-small\"\n            onClick={handleGenerateQR}\n            disabled={loading}\n          >\n            {showQR ? '–û–±–Ω–æ–≤–∏—Ç—å QR-–∫–æ–¥' : '–ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è'}\n          </button>\n\n          {qrData && showQR && (\n            <div className=\"qr-display\">\n              <div className=\"qr-content\">\n                <QRCodeSVG\n                  value={qrData.url}\n                  size={200}\n                  level=\"H\"\n                  includeMargin={true}\n                />\n                <p className=\"qr-instruction\">\n                  –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ –∫–∞–º–µ—Ä–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω–∞\n                </p>\n                {/* –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï */}\n                <div className=\"warning-section\">\n                    <div className=\"warning-box\">\n                        <div className=\"warning-icon\">‚ö†Ô∏è</div>\n                        <div className=\"warning-content\">\n                            <h3>–í–ê–ñ–ù–û!</h3>\n                            <p>\n                                <strong>QR-–∫–æ–¥ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç, –æ–ø–ª–∞—Ç–∞ –ø–æ –∏—Å—Ç—ë–∫—à–∏–º —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ —Å—Ä–µ–¥—Å—Ç–≤.</strong>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* –û–®–ò–ë–ö–ê */}\n        {error && (\n          <div className=\"error-section\">\n            <div className=\"error-box\">\n              <span className=\"error-icon\">‚ö†Ô∏è</span>\n              <p>{error}</p>\n            </div>\n          </div>\n        )}\n\n        {/* FAQ */}\n        <div className=\"faq-section\">\n          <h3>–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h3>\n          <details className=\"faq-item\">\n            <summary>–ö–∞–∫ –æ–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–∞–Ω–∫–∞?</summary>\n            <p>–ù–∞–∂–º–∏—Ç–µ \"–í—ã–±—Ä–∞—Ç—å –±–∞–Ω–∫\", —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–∫—Ä–æ–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–∞–Ω–∫–æ–≤ –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –°–ë–ü.</p>\n          </details>\n          <details className=\"faq-item\">\n            <summary>–ó–∞—á–µ–º –Ω—É–∂–µ–Ω QR-–∫–æ–¥?</summary>\n            <p>QR-–∫–æ–¥ ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ –µ–≥–æ –∫–∞–º–µ—Ä–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –µ—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –≤—ã–±–æ—Ä–∞ –±–∞–Ω–∫–∞.</p>\n          </details>\n          <details className=\"faq-item\">\n            <summary>–í –∫–∞–∫–∏–µ —á–∞—Å—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –ø–ª–∞—Ç–µ–∂–∏?</summary>\n            <p>–ü–ª–∞—Ç–µ–∂–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 10:00 –¥–æ 21:00 –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏.</p>\n          </details>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}